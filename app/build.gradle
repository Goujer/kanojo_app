apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'

android {
	compileSdkVersion 31

	defaultConfig {
		applicationId 'com.goujer.barcodekanojo'
		//noinspection ExpiredTargetSdkVersion
		targetSdkVersion 27
		//VersionCode Scheme AABBBBBB	A=minSDK, B=Version of App (BB.BB.BB)
		versionCode 303
		versionName "0.3.3"

		//multiDexEnabled true
	}

	signingConfigs {
		release {
			storeFile file("../release.jks")
			storePassword RELEASE_STORE_PASSWORD
			keyAlias RELEASE_KEY_ALIAS
			keyPassword RELEASE_KEY_PASSWORD
		}
	}

	buildTypes {
		release {
			minifyEnabled false
			shrinkResources false
			proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
			signingConfig signingConfigs.release
		}
		debug {
			debuggable true
			applicationIdSuffix '.DEBUG'
			versionNameSuffix '.d'
		}
	}

	//VersionCode Scheme AABBBBBB	A=minSDK, B=Version of App (BB.BB.BB)
	flavorDimensions 'default'
	productFlavors {
		sdk9 {
			minSdkVersion 9
			versionCode 9000000 + android.defaultConfig.versionCode
		}

		sdk8 {
			minSdkVersion 8
			versionCode 8000000 + android.defaultConfig.versionCode
		}

		sdk4 {
			minSdkVersion 4
			versionCode 4000000 + android.defaultConfig.versionCode
		}
	}

	packagingOptions {
		jniLibs {
			excludes += ['META-INF/*']
		}
		resources {
			excludes += ['META-INF/*']
		}
	}

	//compileOptions {
	//	coreLibraryDesugaringEnabled true

	//	sourceCompatibility JavaVersion.VERSION_1_8
	//	targetCompatibility JavaVersion.VERSION_1_8
	//}
	//kotlinOptions {
	//	jvmTarget = "1.8"
	//}

	lint {
		abortOnError false
	}

	namespace 'com.goujer.barcodekanojo'
}

dependencies {
	//LruCache
	sdk9Implementation 'com.android.support:support-core-utils:25.4.0'

	//SharedPreferences,
	sdk9Implementation 'com.android.support:support-compat:25.4.0'

	//SDK 4-8 LruCache & SharedPreferences
	sdk8Implementation 'com.android.support:support-v4:24.1.1'
	sdk4Implementation 'com.android.support:support-v4:24.1.1'

	//ExifInterface
	sdk9Implementation 'com.android.support:exifinterface:25.4.0'
		//LowerSDKs use system version

	//Maps
	sdk9Implementation 'org.osmdroid:osmdroid-android:6.1.11'
	sdk8Implementation 'org.osmdroid:osmdroid-android:6.1.11'
	sdk4Implementation 'org.osmdroid:osmdroid-android:4.3'

	//Charts
	implementation 'com.github.PhilJay:MPAndroidChart:v3.0.3'

	//ZXing
	implementation 'com.google.zxing:core:3.2.1'
	//implementation 'com.google.zxing:android-core:3.2.1'
	//implementation 'com.google.zxing:android-integration:3.2.1'

	//Live2D
	implementation files('libs/live2d_android.jar')

	//Kotlin
	//implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version"
	implementation "org.jetbrains.kotlinx:kotlinx-coroutines-android:$kotlin_coroutines_version"
	//implementation "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
}